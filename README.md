# backend-logic service

- Сервис, основная задача которого - доставать из EVM (see evm_inspect repo) трейсы и складывать их в базу
- Сервис написан на Golang и представляет собой HTTP сервер
- Помимо этого, сервис отвечает за вычисление "окрестности" заданного адреса (топ-N адресов, для которых есть трейсы с заданным адресом). Оглядываясь назад: эту логику следовало бы унести в backend-morda

## Сборка и запуск
```bash
$ make build_server ; ./build/server -port 5566
```

## Endpoints

- GET `/trace_block/[id]"` - получение трейсов по номеру блока (из базы)
- GET `/trace_address/[address_hash]` - получений "окрестности" по хэшу адреса (из базы)
- POST `/force_trace_block/[id]` - достает из EVM (see evm_inspect repo) все трейсы из блока по его номеру, кладет трейсы в базу

## TODO

- Убрать `GET` локику в `backend-morda`
- Добавить возможность асинхронной обработки блоков: внутренняя очередь + rate limiter. Обрабатывать блоки в режиме online (возможно - каждый 10/20/50-ый блок, нужно смотреть на пропускную способность)